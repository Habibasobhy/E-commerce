"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[444],{3444:(Z,p,s)=>{s.r(p),s.d(p,{CartModule:()=>y});var d=s(6814),u=s(7163),t=s(4769),m=s(8829),C=s(2425);function h(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div",10)(1,"div",11),t._UZ(2,"img",12),t.qZA(),t.TgZ(3,"div",13)(4,"div",14)(5,"h4"),t._uU(6),t.qZA(),t.TgZ(7,"p",7),t._uU(8),t.qZA(),t.TgZ(9,"div",15)(10,"p",16),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"button",17),t.NdJ("click",function(){const a=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.deleteItem(a.product.id))}),t._UZ(14,"i",18),t._uU(15," Remove "),t.qZA()()()(),t.TgZ(16,"div",11)(17,"button",19),t.NdJ("click",function(){const a=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.updateCount(a.count-1,a.product.id))}),t._uU(18,"-"),t.qZA(),t.TgZ(19,"span",20),t._uU(20),t.qZA(),t.TgZ(21,"button",19),t.NdJ("click",function(){const a=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.updateCount(a.count+1,a.product.id))}),t._uU(22,"+"),t.qZA()()()}if(2&o){const n=c.$implicit;t.Tol(c.last?"border-bottom-none":"add-border-bottom"),t.xp6(2),t.Q6J("src",n.product.imageCover,t.LSH),t.xp6(4),t.Oqu(n.product.title),t.xp6(2),t.Oqu(n.product.category.name),t.xp6(3),t.Oqu(t.xi3(12,7,n.price,"EGP ")),t.xp6(9),t.Oqu(n.count)}}const _=function(o){return["checkout",o]};function g(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"h2"),t._uU(3,"Cart Shop"),t.qZA(),t.TgZ(4,"button",4)(5,"a",5),t._uU(6," Check Out "),t.qZA()()(),t.TgZ(7,"div",6)(8,"h4"),t._uU(9,"Total Items : "),t.TgZ(10,"span",7),t._uU(11),t.qZA()(),t.TgZ(12,"h4"),t._uU(13,"Total Price : "),t.TgZ(14,"span",7),t._uU(15),t.qZA()()(),t.YNc(16,h,23,10,"div",8),t.TgZ(17,"button",9),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.clearCart())}),t._uU(18,"Clear Your Cart"),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(5),t.Q6J("routerLink",t.VKq(4,_,n.cartDetails.data._id)),t.xp6(6),t.Oqu(n.cartDetails.numOfCartItems),t.xp6(4),t.Oqu(n.cartDetails.data.totalCartPrice),t.xp6(1),t.Q6J("ngForOf",n.cartDetails.data.products)}}function f(o,c){1&o&&(t.TgZ(0,"div",21)(1,"h1",22),t._uU(2,"Your cart is empty."),t.qZA()())}let b=(()=>{var o;class c{constructor(e,r,a){this._cartService=e,this._router=r,this._toastrService=a,this.isCartEmpty=!1,this.cartDetails={}}ngOnInit(){this.getCart()}getCart(){this._cartService.getCart().subscribe({next:e=>{console.log(e),this.cartDetails=e,console.log(this.cartDetails),this.isCartEmpty=!1},error:e=>{console.log(e),this.isCartEmpty=!0}})}updateCount(e,r){e>0?this._cartService.updateProductCount(e,r).subscribe({next:a=>{console.log(a),this.cartDetails=a}}):this.deleteItem(r)}deleteItem(e){this._cartService.deleteProduct(e).subscribe({next:r=>{this._cartService.cartNumber.next(r.numOfCartItems),console.log(r),this.cartDetails=r,this._toastrService.success("Product removed successfully to your cart")}})}clearCart(){this._cartService.clearCart().subscribe({next:e=>{console.log(e),this.cartDetails=e,this._cartService.cartNumber.next(0),this._router.navigate(["/home"])}})}}return(o=c).\u0275fac=function(e){return new(e||o)(t.Y36(m.N),t.Y36(u.F0),t.Y36(C._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cart"]],decls:2,vars:2,consts:[["class","container p-5 my-5 bg-main-light rounded-3",4,"ngIf"],["class","container py-5 my-5 bg-main-light rounded-3",4,"ngIf"],[1,"container","p-5","my-5","bg-main-light","rounded-3"],[1,"d-flex","justify-content-between"],[1,"btn","btn-primary"],[1,"fs-5","text-white","text-decoration-none",3,"routerLink"],[1,"d-flex","justify-content-between","my-4"],[1,"text-main"],["class","row align-items-center py-3",3,"class",4,"ngFor","ngForOf"],[1,"btn","btn-lg","d-block","mx-auto","mt-5","btnClearCart",3,"click"],[1,"row","align-items-center","py-3"],[1,"col-md-2"],[1,"w-100",3,"src"],[1,"col-md-8"],[1,"item"],[1,"d-flex","align-items-center"],[1,"text-main","mb-0","me-3"],[1,"btn","text-danger",3,"click"],[1,"fa-regular","fa-trash-can"],[1,"btn","btn-update",3,"click"],[1,"mx-3"],[1,"container","py-5","my-5","bg-main-light","rounded-3"],[1,"text-danger","py-5","ps-5","fw-bolder"]],template:function(e,r){1&e&&(t.YNc(0,g,19,6,"div",0),t.YNc(1,f,3,0,"div",1)),2&e&&(t.Q6J("ngIf",(null==r.cartDetails||null==r.cartDetails.data?null:r.cartDetails.data.products)&&0!=r.cartDetails.numOfCartItems),t.xp6(1),t.Q6J("ngIf",0==r.cartDetails.numOfCartItems||r.isCartEmpty))},dependencies:[d.sg,d.O5,u.rH,d.H9],styles:[".btn-update[_ngcontent-%COMP%]{border:1px solid var(--main-color)}.btn-update[_ngcontent-%COMP%]:hover{background-color:var(--main-color);color:#fff;border-color:#fff}.border-bottom-none[_ngcontent-%COMP%]{border-bottom:none}.add-border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e5dfdf}.btnClearCart[_ngcontent-%COMP%]{border:1px solid var(--main-color);color:#000;transition:.4s all}.btnClearCart[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--main-color)}"]}),c})();var i=s(95);const v=[{path:"",component:b,title:"cart"},{path:"checkout/:cartId",component:(()=>{var o;class c{constructor(e,r,a){this._cartService=e,this._activatedRoute=r,this._router=a,this.shippingAddress=new i.cw({details:new i.NI(null),phone:new i.NI(null),city:new i.NI(null)}),this.cartId="",this._activatedRoute.paramMap.subscribe(l=>{this.cartId=l.params.cartId,console.log(this.cartId)})}handleOnline(){console.log(this.shippingAddress),this._cartService.generateOnlinePayment(this.cartId,this.shippingAddress.value).subscribe({next:e=>{console.log(e),"success"==e.status&&(console.log(e.session.url),window.location.href=e.session.url)},error:e=>{console.log("error here",e)}})}handleCash(){console.log(this.shippingAddress),this._cartService.generateCashPayment(this.cartId,this.shippingAddress.value).subscribe({next:e=>{console.log(e),"success"==e.status&&this._router.navigate(["/cashOrder"])},error:e=>{console.log("error here",e)}})}}return(o=c).\u0275fac=function(e){return new(e||o)(t.Y36(m.N),t.Y36(u.gz),t.Y36(u.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-checkout"]],decls:16,vars:1,consts:[[1,"w-50","mx-auto","py-5"],[3,"formGroup"],["for","details"],["type","text","id","details","formControlName","details",1,"form-control","mb-3","mt-2"],["for","phone"],["type","tel","id","phone","formControlName","phone",1,"form-control","mb-3","mt-2"],["for","city"],["type","text","id","city","formControlName","city",1,"form-control","mb-4","mt-2"],[1,"payment","d-flex","justify-content-between"],[1,"btn","btn-danger","w-25","mt-4","d-block","text-white",3,"click"],[1,"btn","bg-main","w-25","mt-4","d-block","text-white",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"form",1)(2,"label",2),t._uU(3,"Details"),t.qZA(),t._UZ(4,"input",3),t.TgZ(5,"label",4),t._uU(6,"Phone"),t.qZA(),t._UZ(7,"input",5),t.TgZ(8,"label",6),t._uU(9,"city"),t.qZA(),t._UZ(10,"input",7),t.TgZ(11,"div",8)(12,"button",9),t.NdJ("click",function(){return r.handleCash()}),t._uU(13,"Pay cash"),t.qZA(),t.TgZ(14,"button",10),t.NdJ("click",function(){return r.handleOnline()}),t._uU(15,"Pay online"),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",r.shippingAddress))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u]}),c})(),title:"checkout"}];let x=(()=>{var o;class c{}return(o=c).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(v),u.Bz]}),c})(),y=(()=>{var o;class c{}return(o=c).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.ez,x,i.UX,i.u5]}),c})()}}]);